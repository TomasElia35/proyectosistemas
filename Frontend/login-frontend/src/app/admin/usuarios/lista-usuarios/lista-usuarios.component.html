<!-- src/app/admin/usuarios/lista-usuarios/lista-usuarios.component.html -->
<div class="usuarios-container">
  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-brand">
      <h3>Gesti√≥n de Usuarios</h3>
    </div>
    <div class="navbar-user">
      <button class="btn btn-outline-light btn-sm mr-2" (click)="volverDashboard()">
        ‚Üê Dashboard
      </button>
      <span class="user-info">{{ currentUser?.nombre }} {{ currentUser?.apellido }}</span>
      <button class="btn btn-outline-danger btn-sm ml-2" (click)="logout()">
        Cerrar Sesi√≥n
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="main-content">
    <div class="container">
      <!-- Header -->
      <div class="content-header">
        <h1>Lista de Usuarios</h1>
        <button class="btn btn-primary" (click)="crearUsuario()">
          + Nuevo Usuario
        </button>
      </div>

      <!-- Loading -->
      <div *ngIf="loading" class="loading-container">
        <div class="spinner"></div>
        <p>Cargando usuarios...</p>
      </div>

      <!-- Error -->
      <div *ngIf="error && !loading" class="alert alert-danger">
        {{ error }}
        <button class="btn btn-sm btn-outline-danger ml-2" (click)="cargarUsuarios()">
          Reintentar
        </button>
      </div>

      <!-- Tabla de Usuarios -->
      <div *ngIf="!loading && !error" class="table-container">
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Email</th>
                <th>Rol</th>
                <th>Estado</th>
                <th>Fecha Creaci√≥n</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let usuario of usuarios" [class.disabled-row]="!usuario.estado">
                <td>{{ usuario.id }}</td>
                <td>{{ usuario.nombre }} {{ usuario.apellido }}</td>
                <td>{{ usuario.mail }}</td>
                <td>
                  <span class="badge badge-info">{{ usuario.rol?.nombre }}</span>
                </td>
                <td>
                  <span class="badge" [ngClass]="usuario.estado ? 'badge-success' : 'badge-danger'">
                    {{ usuario.estado ? 'Activo' : 'Inactivo' }}
                  </span>
                </td>
                <td>{{ usuario.fechaCreacion | date:'dd/MM/yyyy' }}</td>
                <td>
                  <div class="action-buttons">
                    <button 
                      class="btn btn-sm btn-outline-primary"
                      (click)="editarUsuario(usuario.id!)"
                      title="Editar">
                      ‚úèÔ∏è
                    </button>
                    <button 
                      class="btn btn-sm"
                      [ngClass]="usuario.estado ? 'btn-outline-warning' : 'btn-outline-success'"
                      (click)="cambiarEstado(usuario)"
                      [title]="usuario.estado ? 'Desactivar' : 'Activar'">
                      {{ usuario.estado ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è' }}
                    </button>
                    <button 
                      class="btn btn-sm btn-outline-danger"
                      (click)="eliminarUsuario(usuario)"
                      [disabled]="usuario.id === currentUser?.id"
                      title="Eliminar">
                      üóëÔ∏è
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Empty State -->
        <div *ngIf="usuarios.length === 0" class="empty-state">
          <div class="empty-icon">üë•</div>
          <h3>No hay usuarios registrados</h3>
          <p>Crea el primer usuario para comenzar</p>
          <button class="btn btn-primary" (click)="crearUsuario()">
            Crear Usuario
          </button>
        </div>
      </div>
    </div>
  </div>
</div>